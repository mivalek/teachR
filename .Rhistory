?install.packages()
library(teachR)
slidify
?slidify()
?slidify
setwd("C:/Users/mvalasek/teachR")
document()
library("devtools")
library("roxygen2")
document()
setwd("..")
install(teachR)
install("teachR")
install("teachR", lib = .libPaths()[2])
?slidify
library(teachR)
?slidify
setwd("C:/Users/mvalasek/teachR")
document()
setwd("C:/Users/mvalasek/blgdwn_website/public")
course = "dapR_1"; sem = 1; weeks = 1:10; label = "Explainer"; link = paste0("/explainers/topic_", sprintf("%02d", 1:10), ".html")
course
length(weeks)
!(length(weeks) == 1 && weeks[1] == "all")
class(weeks)
if (!(length(weeks) == 1 && weeks[1] == "all") && class(weeks) %in% c("integer", "numeric"))
stop("weeks= must be either \"all\" or numeric.")
class(weeks) %in% c("integer", "numeric")
!(length(weeks) == 1 && weeks[1] == "all")
!class(weeks) %in% c("integer", "numeric")
class("weeks")
class(weeks)
class(weeks) == "numeric"
class(1) == "numeric"
class(seq(1, 5)) == "numeric"
class(seq(1, 5)) == "integer"
class(1) == "integer"
if (!(length(weeks) == 1 && weeks[1] == "all") && !class(weeks) %in% c("integer", "numeric"))
stop("weeks= must be either \"all\" or numeric.")
label <- sub("^(.)", "\\U\\1", tolower(label), perl = T)
sem <- paste0("sem_", sem)
ff <- ifelse(is.null(sem),
paste(course,  "index.html", sep = "/"),
paste(course,  sem, "index.html", sep = "/"))
x <- readLines(ff)
bttns <- grep(paste0("<li><a href=.*?class=\"button.*?big\">",
label,"</a></li>"), x)
bttns
label
weeks
weeks[1]
if (!course %in% c(paste0("dapR_", 1:3L), "usmr", "msmr"))
stop('course must be one of c("dapR_1", "daprR_2", "dapR_3", "usmr", "msmr")')
if (!isFALSE(course %in% c("dapR_1", "dapR_2") && !sem %in% 1:2L))
stop(paste('sem= must be either 1 or 2 for', course))
if (missing(label)) stop("Button label not provided.")
if (missing(label)) stop("Links need to be provided..")
if (!(length(weeks) == 1 && weeks[1] == "all") && !class(weeks) %in% c("integer", "numeric"))
stop("weeks= must be either \"all\" or numeric.")
label <- sub("^(.)", "\\U\\1", tolower(label), perl = T)
sem <- paste0("sem_", sem)
ff <- ifelse(is.null(sem),
paste(course,  "index.html", sep = "/"),
paste(course,  sem, "index.html", sep = "/"))
x <- readLines(ff)
getwd
getwd()
course
sem
sem = 1
weeks = 1:10
if (!course %in% c(paste0("dapR_", 1:3L), "usmr", "msmr"))
stop('course must be one of c("dapR_1", "daprR_2", "dapR_3", "usmr", "msmr")')
if (!isFALSE(course %in% c("dapR_1", "dapR_2") && !sem %in% 1:2L))
stop(paste('sem= must be either 1 or 2 for', course))
if (missing(label)) stop("Button label not provided.")
if (missing(label)) stop("Links need to be provided..")
if (!(length(weeks) == 1 && weeks[1] == "all") && !class(weeks) %in% c("integer", "numeric"))
stop("weeks= must be either \"all\" or numeric.")
label <- sub("^(.)", "\\U\\1", tolower(label), perl = T)
sem <- paste0("sem_", sem)
ff <- ifelse(is.null(sem),
paste(course,  "index.html", sep = "/"),
paste(course,  sem, "index.html", sep = "/"))
x <- readLines(ff)
bttns <- grep(paste0("<li><a href=.*?class=\"button.*?big\">",
label,"</a></li>"), x)
bttns
length(bttns) < max(weeks)
bttns[weeks]
gsub("^/?(.*?)/?$", "/\\1/", links)
links <- paste0("/explainers/topic_", sprintf("%02d", 1:10), ".html")
gsub("^/?(.*?)/?$", "/\\1/", links)
weeks = "all"
!(length(weeks) == 1 && weeks[1] == "all") && !class(weeks) %in% c("integer", "numeric")
weeks[1] == "all"
1:length(bttns)
link.button <- function(course, sem = NULL, weeks = "all", label, links) {
if (!course %in% c(paste0("dapR_", 1:3L), "usmr", "msmr"))
stop('course must be one of c("dapR_1", "daprR_2", "dapR_3", "usmr", "msmr")')
if (!isFALSE(course %in% c("dapR_1", "dapR_2") && !sem %in% 1:2L))
stop(paste('sem= must be either 1 or 2 for', course))
if (missing(label)) stop("Button label not provided.")
if (missing(label)) stop("Links need to be provided..")
if (!(length(weeks) == 1 && weeks[1] == "all") && !class(weeks) %in% c("integer", "numeric"))
stop("weeks= must be either \"all\" or numeric.")
label <- sub("^(.)", "\\U\\1", tolower(label), perl = T)
sem <- paste0("sem_", sem)
ff <- ifelse(is.null(sem),
paste(course,  "index.html", sep = "/"),
paste(course,  sem, "index.html", sep = "/"))
x <- readLines(ff)
bttns <- grep(paste0("<li><a href=.*?class=\"button.*?big\">",
label,"</a></li>"), x)
if (weeks[1] == "all") weeks <- 1:length(bttns)
if (length(bttns) < max(weeks)) {
weeks <- weeks[weeks <= length(bttns)]
warning("More weeks than buttons; ignoring excess weeks.")
}
bttns <- bttns[weeks]
links <- gsub("^/?(.*?)/?$", "/\\1/", links) # add leading and trailing /
for (i in 1:length(bttns))
x[bttns[i]] <- sub("(.*?href=\\\").*?(\\\" class.*?)",
paste0("\\1", links[i], "\\2"),
x[bttns[i]])
writeLines(x, ff)
}
link.button(course = "dapR_1", sem = 1,weeks = 2, label = "Explainer", links = paste0("/explainers/topic_", sprintf("%02d", 1:10), ".html"))
link.button(course = "dapR_1", sem = 1, label = "Explainer", links = paste0("/explainers/topic_", sprintf("%02d", 1:10), ".html"))
paste0("/explainers/topic_", sprintf("%02d", 1:10), ".html")
course = "dapR_1"; sem = 1; weeks = "all"; label = "Explainer"; links = paste0("/explainers/topic_", sprintf("%02d", 1:10), ".html")
if (!course %in% c(paste0("dapR_", 1:3L), "usmr", "msmr"))
stop('course must be one of c("dapR_1", "daprR_2", "dapR_3", "usmr", "msmr")')
if (!isFALSE(course %in% c("dapR_1", "dapR_2") && !sem %in% 1:2L))
stop(paste('sem= must be either 1 or 2 for', course))
if (missing(label)) stop("Button label not provided.")
if (missing(label)) stop("Links need to be provided..")
if (!(length(weeks) == 1 && weeks[1] == "all") && !class(weeks) %in% c("integer", "numeric"))
stop("weeks= must be either \"all\" or numeric.")
label <- sub("^(.)", "\\U\\1", tolower(label), perl = T)
sem <- paste0("sem_", sem)
ff <- ifelse(is.null(sem),
paste(course,  "index.html", sep = "/"),
paste(course,  sem, "index.html", sep = "/"))
x <- readLines(ff)
bttns <- grep(paste0("<li><a href=.*?class=\"button.*?big\">",
label,"</a></li>"), x)
if (weeks[1] == "all") weeks <- 1:length(bttns)
if (length(bttns) < max(weeks)) {
weeks <- weeks[weeks <= length(bttns)]
warning("More weeks than buttons; ignoring excess weeks.")
}
bttns <- bttns[weeks]
gsub("^/?(.*?)/?$", "/\\1/", links)
gsub("^/?(.*?)/?$", "/\\1", links)
grepl("\\.", links)
gsub("^/?(.*?)/?$", ifelse(grepl("\\.", links), "/\\1", "/\\1/"), links)
ifelse(grepl("\\.", links), "/\\1", "/\\1/")
seq_along(links)
1:1
i <- 1
gsub("^/?(.*?)/?$", ifelse(grepl("\\.", links[i]), "/\\1", "/\\1/"), links[i])
gsub("^/?(.*?)/?$", ifelse(grepl("\\.", links[i]), "/\\1", "/\\1/"), "explainers")
gsub("^/?(.*?)/?$", ifelse(grepl("\\.", "explainers"), "/\\1", "/\\1/"), "explainers")
#' Link a button on course content page to URL
#'
#' Function links a given button (all weeks by default) to URLs specified in links=.
#'
#' IMPORTANT: Set working directory to website folder!.
#'
#' @param course character. Course page to modify: one of "dapR_1", "daprR_2", "dapR_3", "usmr", or "msmr".
#' @param sem numeric. Semester to modify: either 1 or 2. Only applicable for 2-semester courses, currently dapR 1 and 2.
#' @param weeks Buttons in which weeks to link. Defaults to "all", otherwise numeric vector.
#' @param label character. Name of the button to link.
#' @param links character vector. URLs for the buttons. Either length 1 or length(weeks)
#' @return Function does not return anything of use.
#' @examples
#' # Link Explainer button for each week to 10 different URLs
#' link.button(course = "dapR_1", sem = 2, label = "Explainer",
#' link = paste0("/explainers/topic_", sprintf("%02d", 1:10), ".html"))
link.button <- function(course, sem = NULL, weeks = "all", label, links) {
if (!course %in% c(paste0("dapR_", 1:3L), "usmr", "msmr"))
stop('course must be one of c("dapR_1", "daprR_2", "dapR_3", "usmr", "msmr")')
if (!isFALSE(course %in% c("dapR_1", "dapR_2") && !sem %in% 1:2L))
stop(paste('sem= must be either 1 or 2 for', course))
if (missing(label)) stop("Button label not provided.")
if (missing(label)) stop("Links need to be provided..")
if (!(length(weeks) == 1 && weeks[1] == "all") && !class(weeks) %in% c("integer", "numeric"))
stop("weeks= must be either \"all\" or numeric.")
label <- sub("^(.)", "\\U\\1", tolower(label), perl = T)
sem <- paste0("sem_", sem)
ff <- ifelse(is.null(sem),
paste(course,  "index.html", sep = "/"),
paste(course,  sem, "index.html", sep = "/"))
x <- readLines(ff)
bttns <- grep(paste0("<li><a href=.*?class=\"button.*?big\">",
label,"</a></li>"), x)
if (weeks[1] == "all") weeks <- 1:length(bttns)
if (length(bttns) < max(weeks)) {
weeks <- weeks[weeks <= length(bttns)]
warning("More weeks than buttons; ignoring excess weeks.")
}
bttns <- bttns[weeks]
for (i in seq_along(links))
links[i] <- gsub("^/?(.*?)/?$",
ifelse(grepl("\\.", links[i]), "/\\1", # add leading / if links to a file
"/\\1/"), # add leading and trailing / if links to folder
links[i])
for (i in 1:length(bttns))
x[bttns[i]] <- sub("(.*?href=\\\").*?(\\\" class.*?)",
paste0("\\1", links[i], "\\2"),
x[bttns[i]])
writeLines(x, ff)
}
link.button(course = "dapR_1", sem = 1, label = "Explainer", links = paste0("/explainers/topic_", sprintf("%02d", 1:10), ".html"))
link.button(course = "dapR_1", sem = 1, label = "Explainer", links = paste0("/explainers/topic_", sprintf("%02d", 1:10)))
library(devtools)
library(roxygen2)
document()
getwd()
setwd("../../teachR")
document()
setwd("..")
install("teachR", lib = .libPaths()[2])
getwd()
library(teachR)
?link.button
library(devtools)
library(devtools, lib.loc = .libPaths()[2])
library(devtools)
install_github("mivalek/teachR")
install_github("mivalek/teachR", lib = .libPaths()[2])
